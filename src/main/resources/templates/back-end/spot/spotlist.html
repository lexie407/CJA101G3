<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ÊôØÈªûÁÆ°ÁêÜ - ÂæåÂè∞ÁÆ°ÁêÜÁ≥ªÁµ±</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ÂºïÂÖ•ÂæåÂè∞Ê®°ÊùøÁöÑÈ†≠ÈÉ®Ë≥áÊ∫ê -->
    <th:block th:replace="~{navBackTemplate :: headResources}"></th:block>
    
    <!-- ÊôØÈªûÊ®°ÁµÑÂ∞àÁî®Ê®£Âºè -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/spot/back-end/spot-common.css}">
    <link rel="stylesheet" th:href="@{/css/spot/back-end/spot-list.css}">
    
    <!-- ÂºïÂÖ• DataTables Áõ∏ÈóúË≥áÊ∫ê -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js" defer></script>
    
    <!-- Toastify ÈÄöÁü•Â∫´ -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <script th:src="@{/js/spot/back-end/list.js?v=9}" defer></script>
</head>
<body class="light">
    <div class="app-container">
        <!-- ÂºïÂÖ•ÂæåÂè∞Â∑¶ÂÅ¥Â∞éËà™ -->
        <th:block th:replace="~{navBackTemplate :: navbar}"></th:block>
        
        <div class="main-content">
            <!-- È†ÇÈÉ®Â∞éËà™ -->
            <div th:replace="~{subnavContentBack :: subnav(activeItem='spotlist')}"></div>

            <main class="content-area-main spot-list-page">
        <!-- ÁØ©ÈÅ∏ÊéßÂà∂ÂçÄ -->
        <div class="filter-section">
            <div class="filter-controls">
                <div class="search-box">
                    <input type="text" placeholder="ÊêúÂ∞ãÊôØÈªûÂêçÁ®±„ÄÅÂú∞Èªû..." id="searchInput" th:value="${param.keyword}">
                    <span class="search-icon">üîç</span>
                </div>

                <!-- ÁØ©ÈÅ∏ÊåâÈàïÁæ§ÁµÑ -->
                <div class="filter-dropdown-group">
                    <!-- ÁãÄÊÖãÁØ©ÈÅ∏ -->
                    <div class="filter-dropdown" data-filter="status">
                        <button class="filter-btn" id="statusBtn">
                            <span>ÁãÄÊÖãÁØ©ÈÅ∏</span>
                            <span class="filter-arrow">‚ñº</span>
                        </button>
                        <div class="dropdown-menu" id="statusDropdown">
                            <div class="dropdown-content">
                                <div class="option-item">
                                    <input type="radio" name="status" value="all" id="status-all" checked>
                                    <label for="status-all">ÂÖ®ÈÉ®ÁãÄÊÖã</label>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="status" value="1" id="status-active">
                                    <label for="status-active">‰∏äÊû∂</label>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="status" value="2" id="status-rejected">
                                    <label for="status-rejected">ÈÄÄÂõû</label>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="status" value="3" id="status-inactive">
                                    <label for="status-inactive">‰∏ãÊû∂</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Âú∞ÂçÄÁØ©ÈÅ∏ -->
                    <div class="filter-dropdown" data-filter="region">
                        <button class="filter-btn" id="regionBtn">
                            <span>Âú∞ÂçÄÁØ©ÈÅ∏</span>
                            <span class="filter-arrow">‚ñº</span>
                        </button>
                        <div class="dropdown-menu" id="regionDropdown">
                            <div class="dropdown-content">
                                <div class="option-item">
                                    <input type="radio" name="region" value="all" id="region-all" checked>
                                    <label for="region-all">ÂÖ®ÈÉ®Âú∞ÂçÄ</label>
                                </div>
                                <!-- ÂãïÊÖãÁîüÊàêÂú∞ÂçÄÈÅ∏È†Ö -->
                                <th:block th:each="region, iterStat : ${allRegions}">
                                    <div class="option-item">
                                        <input type="radio" name="region" th:value="${region}" th:id="'region-' + ${iterStat.index}">
                                        <label th:for="'region-' + ${iterStat.index}" th:text="${region}">Âú∞ÂçÄÂêçÁ®±</label>
                                    </div>
                                </th:block>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ê∏ÖÈô§ÊåâÈàï -->
                    <button type="button" class="clear-btn">Ê∏ÖÈô§</button>
                </div>
                
                <!-- Âè≥ÂÅ¥ÊéßÂà∂È†Ö -->
                <div class="right-controls">
                    <!-- ÂàÜÈ†ÅÊéßÂà∂ -->
                    <div class="pagination-control">
                        <span>ÊØèÈ†ÅÈ°ØÁ§∫</span>
                        <select id="pageSizeSelect">
                            <option value="5">5 Á≠Ü</option>
                            <option value="10" selected>10 Á≠Ü</option>
                            <option value="20">20 Á≠Ü</option>
                            <option value="30">30 Á≠Ü</option>
                            <option value="-1">È°ØÁ§∫ÊâÄÊúâ</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÊàêÂäü/ÈåØË™§Ë®äÊÅØ -->
        <div th:if="${successMessage}" class="alert alert-success">
            <i class="material-icons">check_circle</i>
            <span th:text="${successMessage}"></span>
        </div>
        <div th:if="${errorMessage}" class="alert alert-error">
            <i class="material-icons">error</i>
            <span th:utext="${errorMessage}"></span> <!-- ‰ΩøÁî®utext‰ª•ÊîØÊåÅHTMLÊèõË°å -->
        </div>
        
        <!-- Ë°®Ê†ºÂçÄÂüü -->
        <div class="table-section">
            <div class="table-header">
                <div class="table-title-group">
                    <button class="sort-btn active" id="sortBtn" title="ÊéíÂ∫è">
                        <span class="sort-icon">‚Üï</span>
                        <span class="sort-text">ÊéíÂ∫è</span>
                    </button>
                    <h2 class="table-title">
                        ÊôØÈªûÂàóË°® <span class="count-badge" id="countBadge" 
                            th:text="|ÂÖ± ${spotPage.totalElements} Á≠Ü|">ÂÖ± 0 Á≠Ü</span>
                    </h2>
                </div>
                <div class="table-actions" style="display: flex; align-items: center; gap: 12px;">
                    <span class="selected-info hidden" id="selectedInfo">Â∑≤ÈÅ∏Êìá <span id="selectedCount">0</span> ÂÄãÈ†ÖÁõÆ</span>
                    <div class="batch-actions">
                        <!-- ÂéüÊúâÁöÑÊâπÈáèÊìç‰ΩúÊåâÈàï -->
                        <button class="batch-btn hidden" id="batchBtn">
                            ÊâπÈáèÊìç‰Ωú <span class="batch-btn-small">‚ñº</span>
                        </button>
                    </div>
                    <!-- APIÂåØÂÖ•ÊåâÈàï -->
                    <button class="api-import-btn" id="apiImportBtn" type="button">
                        <i class="material-icons">cloud_download</i>
                        <span>APIÂåØÂÖ•</span>
                    </button>
                </div>
            </div>
        </div>
        
        <form id="batchForm" method="post">
            <table class="sample-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="selectAll"></th>
                        <th>ID</th>
                        <th>ÊôØÈªûË≥áË®ä</th>
                        <th>Âú∞Èªû</th>
                        <th>ÁãÄÊÖã</th>
                        <th>Âª∫Á´ãÊôÇÈñì</th>
                        <th>Êìç‰Ωú</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${spotPage.empty}">
                        <td colspan="7">
                            <div class="empty-state-container">
                                <div class="icon">üì≠</div>
                                <div class="title">ÁõÆÂâçÊ≤íÊúâÁ¨¶ÂêàÊ¢ù‰ª∂ÁöÑÊôØÈªûË≥áÊñô</div>
                                <div class="subtitle">Ë´ãË™øÊï¥ÁØ©ÈÅ∏Ê¢ù‰ª∂ÊàñÊ∏ÖÈô§ÁØ©ÈÅ∏</div>
                            </div>
                        </td>
                    </tr>
                    <tr th:each="spot : ${spotPage.content}" th:data-region="${spot.region}">
                        <td><input type="checkbox" name="spotIds" th:value="${spot.spotId}" class="spot-checkbox"></td>
                        <td><span class="spot-id" th:text="'#' + ${spot.spotId}">#58</span></td>
                        <td>
                            <div class="spot-info">
                                <!-- ÊôØÈªûÂúñÁâáÊàñ‰Ωî‰ΩçÁ¨¶ -->
                                <th:block th:if="${spot.firstPictureUrl != null and !#strings.isEmpty(spot.firstPictureUrl)}">
                                    <img th:src="${spot.firstPictureUrl}" 
                                         th:alt="${spot.spotName}" 
                                         class="spot-image">
                                </th:block>
                                <th:block th:unless="${spot.firstPictureUrl != null and !#strings.isEmpty(spot.firstPictureUrl)}">
                                    <div class="spot-image-placeholder">üèûÔ∏è</div>
                                </th:block>
                                
                                <!-- ÊôØÈªûÊñáÂ≠óË≥áË®ä -->
                                <div class="spot-text-info">
                                    <div class="spot-name" th:text="${spot.spotName}">ÊôØÈªûÂêçÁ®±</div>
                                    <div class="spot-desc" th:text="${#strings.abbreviate(spot.spotDesc, 50)}">ÊôØÈªûÊèèËø∞...</div>
                                </div>
                            </div>
                        </td>
                        <td><span class="spot-location" th:text="${spot.spotLoc}">Âú∞Èªû</span></td>
                        <td>
                            <span th:switch="${spot.spotStatus}">
                                <span th:case="0" class="status-badge status-pending">ÂæÖÂØ©Ê†∏</span>
                                <span th:case="1" class="status-badge status-active">‰∏äÊû∂</span>
                                <span th:case="2" class="status-badge status-rejected">ÈÄÄÂõû</span>
                                <span th:case="3" class="status-badge status-inactive">‰∏ãÊû∂</span>
                                <span th:case="*" class="status-badge">Êú™Áü•</span>
                            </span>
                        </td>
                        <td><span class="spot-date" th:text="${#temporals.format(spot.spotCreateAt, 'yyyy-MM-dd')}">2025-06-26</span></td>
                        <td data-label="Êìç‰Ωú">
                            <div class="action-buttons">
                                <a th:href="@{/admin/spot/detail/{id}(id=${spot.spotId})}" class="action-btn btn-view" title="Êü•Áúã">üëÅÔ∏è</a>
                                <a th:href="@{/admin/spot/edit/{id}(id=${spot.spotId})}" class="action-btn btn-edit" title="Á∑®ËºØ">‚úèÔ∏è</a>
                                <form th:action="@{/admin/spot/delete/{id}(id=${spot.spotId})}" method="post" class="action-form" th:data-spot-name="${spot.spotName}">
                                    <button type="submit" class="action-btn btn-delete" title="Âà™Èô§">üóëÔ∏è</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
        
        <!-- ÂâçÁ´ØÂàÜÈ†ÅÊéßÂà∂ -->
        <div class="pagination-container" id="paginationContainer">
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <li class="page-item" id="firstPageBtn">
                        <button class="page-link">
                            <span class="material-icons">first_page</span>
                        </button>
                    </li>
                    <li class="page-item" id="prevPageBtn">
                        <button class="page-link">
                            <span class="material-icons">chevron_left</span>
                        </button>
                    </li>
                    <!-- È†ÅÁ¢ºÂÆπÂô® -->
                    <div id="pageNumbers"></div>
                    <li class="page-item" id="nextPageBtn">
                        <button class="page-link">
                            <span class="material-icons">chevron_right</span>
                        </button>
                    </li>
                    <li class="page-item" id="lastPageBtn">
                        <button class="page-link">
                            <span class="material-icons">last_page</span>
                        </button>
                    </li>
                </ul>
            </nav>
            <div class="pagination-info" id="paginationInfo">
                <!-- ÂàÜÈ†ÅË≥áË®äÂ∞áÁî± JavaScript ÂãïÊÖãÊõ¥Êñ∞ -->
            </div>
        </div>
    </main>

            </main>
        </div>
    </div>
    
    <!-- Â∞áÊâπÈáèÊìç‰ΩúÈÅ∏ÂñÆÁßªÂà∞Ê≠§ËôïÔºåÊàêÁÇ∫ body ÁöÑÁõ¥Â±¨Â≠êÂÖÉÁ¥†Ôºå‰ª•Ëß£Ê±∫Â±§Á¥öËàá overflow Ë£ÅÂàáÂïèÈ°å -->
    <div id="batchMenu">
        <button type="button" class="dropdown-item" data-action="activate">
            <span class="material-icons icon-success">check_circle</span> ÊâπÈáè‰∏äÊû∂
        </button>
        <button type="button" class="dropdown-item" data-action="deactivate">
            <span class="material-icons icon-warning">cancel</span> ÊâπÈáè‰∏ãÊû∂
        </button>
        <button type="button" class="dropdown-item danger" data-action="delete">
            <span class="material-icons icon-danger">delete</span> ÊâπÈáèÂà™Èô§
        </button>
    </div>

    <!-- APIÂåØÂÖ•Ê®°ÊÖãË¶ñÁ™ó -->
    <div id="apiImportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <i class="material-icons">cloud_download</i>
                    APIË≥áÊñôÂåØÂÖ•
                </h2>
                <button class="close-btn" id="closeModal">
                    <i class="material-icons">close</i>
                </button>
            </div>

            <!-- ÂÖ®Âè∞ÊôØÈªûÂåØÂÖ•ÂçÄÂüü -->
            <div class="modal-section">
                <div class="section-header">
                    <h3>
                        <i class="material-icons">map</i>
                        ÂÖ®Âè∞ÊôØÈªûË≥áÊñôÂåØÂÖ•
                    </h3>
                    <p>‰∏ÄÊ¨°ÊÄßÂåØÂÖ•ÂÖ®Âè∞ÁÅ£ÁöÑÁÜ±ÈñÄÊôØÈªûË≥áÊñô<br/>
                    <small>‚ú® Êñ∞ÂäüËÉΩÔºöÂÖ®Âè∞ÂåØÂÖ•ÁèæÂú®ÊúÉÈö®Ê©üÊ∑∑ÂêàÂêÑÂú∞ÂçÄÊôØÈªûÔºåËÆìÂåØÂÖ•ÁµêÊûúÊõ¥Âä†Â§öÊ®£ÂåñÔºÅ</small></p>
                </div>
                
                <div class="form-group">
                    <label for="import-count">ÂåØÂÖ•Á≠ÜÊï∏</label>
                    <div class="input-group">
                        <input id="import-count" type="number" value="30" min="10" max="200">
                        <span class="input-suffix">Á≠Ü (10-200)</span>
                    </div>
                    <div class="helper-text">Âª∫Ë≠∞È¶ñÊ¨°ÂåØÂÖ•Ë®≠ÂÆöÁÇ∫30-50Á≠ÜÔºåÈÅøÂÖçËôïÁêÜÊôÇÈñìÈÅéÈï∑</div>
                </div>
                
                <div class="warning-card">
                    <i class="material-icons">warning</i>
                    <div class="warning-content">
                        <strong>Ê≥®ÊÑè‰∫ãÈ†ÖÔºö</strong>
                        <ul>
                            <li>ÂåØÂÖ•ÈÅéÁ®ãÂèØËÉΩÈúÄË¶ÅÊï∏ÂàÜÈêòÔºåË´ãËÄêÂøÉÁ≠âÂæÖ</li>
                            <li>Á≥ªÁµ±ÊúÉËá™ÂãïË∑≥ÈÅéÈáçË§áÁöÑÊôØÈªû</li>
                            <li>Âª∫Ë≠∞Âú®ÈùûÂ∞ñÂ≥∞ÊôÇÊÆµÂü∑Ë°åÂ§ßÈáèÂåØÂÖ•</li>
                            <li>üé≤ ÂÖ®Âè∞ÂåØÂÖ•ÊúÉÈö®Ê©üÊâì‰∫ÇÊôØÈªûÈ†ÜÂ∫èÔºåÈÅøÂÖçÂêåÂú∞ÂçÄÊôØÈªûÈõÜ‰∏≠ÂåØÂÖ•</li>
                            <li>üìä ÂØ¶ÈöõÂåØÂÖ•ÁöÑÊôØÈªûÊï∏ÈáèÂèØËÉΩÊúÉÊØîË®≠ÂÆöÁöÑÂ§öÔºåÈÄôÊòØÁ≥ªÁµ±Ë®≠Ë®àÁöÑÊ≠£Â∏∏Ë°åÁÇ∫</li>
                        </ul>
                    </div>
                </div>
                
                <button id="importAllBtn" class="btn btn-primary">
                    <i class="material-icons">download</i>
                    ÈñãÂßãÂåØÂÖ•ÂÖ®Âè∞ÊôØÈªû
                </button>
            </div>

            <!-- ‰æùÁ∏£Â∏ÇÂåØÂÖ•ÂçÄÂüü -->
            <div class="modal-section">
                <div class="section-header">
                    <h3>
                        <i class="material-icons">location_city</i>
                        ‰æùÁ∏£Â∏ÇÂåØÂÖ•ÊôØÈªû
                    </h3>
                    <p>ÈÅ∏ÊìáÁâπÂÆöÁ∏£Â∏ÇÂåØÂÖ•ÊôØÈªûË≥áÊñôÔºåÈÅ©ÂêàÈáùÂ∞çÊÄßÂú∞Ë£úÂÖÖÁâπÂÆöÂú∞ÂçÄÁöÑÊôØÈªû</p>
                </div>
                
                <div class="form-group">
                    <label for="city-count">ÊØèÂÄãÁ∏£Â∏ÇÂåØÂÖ•Á≠ÜÊï∏</label>
                    <div class="input-group">
                        <input id="city-count" type="number" value="10" min="10" max="100">
                        <span class="input-suffix">Á≠Ü (10-100)</span>
                    </div>
                    <div class="helper-text">ÊØèÂÄãÁ∏£Â∏ÇÂª∫Ë≠∞ÂåØÂÖ•10-30Á≠ÜÊôØÈªûË≥áÊñô</div>
                </div>
                
                <div class="city-selection">
                    <h4>ÈÅ∏ÊìáÁ∏£Â∏Ç</h4>
                    <div class="city-grid">
                        <!-- Áõ¥ËΩÑÂ∏Ç -->
                        <button class="city-btn" data-city="Taipei">Âè∞ÂåóÂ∏Ç</button>
                        <button class="city-btn" data-city="NewTaipei">Êñ∞ÂåóÂ∏Ç</button>
                        <button class="city-btn" data-city="Taoyuan">Ê°ÉÂúíÂ∏Ç</button>
                        <button class="city-btn" data-city="Taichung">Âè∞‰∏≠Â∏Ç</button>
                        <button class="city-btn" data-city="Tainan">Âè∞ÂçóÂ∏Ç</button>
                        <button class="city-btn" data-city="Kaohsiung">È´òÈõÑÂ∏Ç</button>
                        
                        <!-- ÁúÅËΩÑÂ∏Ç -->
                        <button class="city-btn" data-city="Hsinchu">Êñ∞Á´πÂ∏Ç</button>
                        <button class="city-btn" data-city="Chiayi">ÂòâÁæ©Â∏Ç</button>
                        
                        <!-- Á∏£ -->
                        <button class="city-btn" data-city="HsinchuCounty">Êñ∞Á´πÁ∏£</button>
                        <button class="city-btn" data-city="MiaoliCounty">ËãóÊ†óÁ∏£</button>
                        <button class="city-btn" data-city="ChanghuaCounty">ÂΩ∞ÂåñÁ∏£</button>
                        <button class="city-btn" data-city="NantouCounty">ÂçóÊäïÁ∏£</button>
                        <button class="city-btn" data-city="YunlinCounty">Èõ≤ÊûóÁ∏£</button>
                        <button class="city-btn" data-city="ChiayiCounty">ÂòâÁæ©Á∏£</button>
                        <button class="city-btn" data-city="PingtungCounty">Â±èÊù±Á∏£</button>
                        <button class="city-btn" data-city="YilanCounty">ÂÆúËò≠Á∏£</button>
                        <button class="city-btn" data-city="TaitungCounty">Âè∞Êù±Á∏£</button>
                        <button class="city-btn" data-city="PenghuCounty">ÊæéÊπñÁ∏£</button>
                        <button class="city-btn" data-city="KinmenCounty">ÈáëÈñÄÁ∏£</button>
                        <button class="city-btn" data-city="LienchiangCounty">ÈÄ£Ê±üÁ∏£</button>
                    </div>
                </div>
            </div>

            <!-- ÂåØÂÖ•ÁµêÊûúÂçÄÂüü -->
            <div id="importResult" class="result-area" style="display:none;">
                <div class="result-header">
                    <i class="material-icons">assessment</i>
                    <h4>ÂåØÂÖ•ÁµêÊûú</h4>
                </div>
                <div class="result-content"></div>
            </div>
        </div>
    </div>
</body>
</html> 

<!-- Ê∑ªÂä†ÂæåÂè∞ÊôØÈªûÂàóË°®È†ÅÈù¢ÁöÑFABÊåâÈàï -->
<link rel="stylesheet" th:href="@{/css/back-end-fab.css}">
<div class="admin-fab-container">
    <a th:href="@{/admin/spot/add}" class="admin-fab" title="Êñ∞Â¢ûÊôØÈªû">
        <div class="admin-fab-icon">
            <span class="material-icons">add_location_alt</span>
        </div>
        <div class="admin-fab-tooltip">
            <span>Êñ∞Â¢ûÊôØÈªû</span>
        </div>
    </a>
</div> 