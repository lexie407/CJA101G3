<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{navBackTemplate :: layout(~{::title}, ~{::head}, ~{::main}, ~{::#subnav})}">
<head>
    <title>ÊôØÈªûÂØ©Ê†∏ - ÂæåÂè∞ÁÆ°ÁêÜÁ≥ªÁµ±</title>
    <th:block th:fragment="head">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- ÊôØÈªûÊ®°ÁµÑÈÄöÁî®Ê®£Âºè -->
        <link rel="stylesheet" th:href="@{/css/spot/back-end/spot-common.css}">
        <!-- Review È†ÅÈù¢Â∞àÁî®Ê®£Âºè -->
        <link rel="stylesheet" th:href="@{/css/spot/back-end/review.css}">
        <script th:src="@{/js/spot/back-end/review.js}" defer></script>
        <!-- CSRF Token Êö´ÊôÇË®ªËß£
        <!-- üîß ÈÅéÂ∫¶ÈöéÊÆµÔºöË®ªËß£ÊéâCSRF token -->
        <!-- <meta name="_csrf" th:content="${_csrf.token}"/> -->
        <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
        -->
    </th:block>
</head>
<body>
    <!-- Â≠êÂ∞éË¶ΩÂàó -->
    <div id="subnav" th:replace="~{subnavContentBack :: subnav(activeItem='spotreview')}"></div>

    <!-- ‰∏ªË¶ÅÂÖßÂÆπ -->
    <main th:fragment="main" class="spot-review-page">
        <!-- È°ØÁ§∫Ë®äÊÅØÂçÄÂüü -->
        <div th:if="${successMessage}" class="success-message" style="display: none;" th:attr="data-message=${successMessage}"></div>
        <div th:if="${errorMessage}" class="error-message" style="display: none;" th:attr="data-message=${errorMessage}"></div>
        
        <!-- È†ÅÈù¢Ê®ôÈ°åËàáÂúñÁâáÂçÄÂüü -->
        <div class="page-header-section">
            <div class="header-content">
                <div class="header-text">
                    <h1>ÊôØÈªûÂØ©Ê†∏</h1>
                    <p>ÊôØÈªûÂØ©Ê†∏ÁÆ°ÁêÜÔºåÊîØÊè¥ÊâπÊ¨°Êìç‰ΩúËàáÁãÄÊÖãÁØ©ÈÅ∏</p>
                </div>
                <div class="header-image">
                    <img src="/images/logo.png" alt="ÊôØÈªûÁÆ°ÁêÜÁ≥ªÁµ±" class="header-logo">
                </div>
            </div>
        </div>
        
        <!-- È†ÅÈù¢‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüü -->
        <div class="content-container">
            <!-- Êìç‰ΩúËàáÊêúÂ∞ãÂçÄ -->
            <div class="search-section">
                <div class="search-container">
                    <!-- Â∑¶ÂÅ¥Êìç‰ΩúÊåâÈàïÂçÄ -->
                    <div class="action-buttons-left">
                        <!-- ÁØ©ÈÅ∏‰∏ãÊãâÈÅ∏ÂñÆ -->
                        <div class="filter-dropdown">
                            <button class="modern-btn filter-btn dropdown-toggle" type="button" onclick="toggleFilterDropdown()">
                                <i class="material-icons">filter_list</i>
                                <span>ÁØ©ÈÅ∏</span>
                            </button>
                            <div class="dropdown-menu" id="filterDropdown">
                                <button type="button" onclick="filterByStatus('all')" class="dropdown-item" data-status="all">
                                    <i class="material-icons">list</i>
                                    <span>ÂÖ®ÈÉ®È°ØÁ§∫</span>
                                </button>
                                <button type="button" onclick="filterByStatus(0)" class="dropdown-item active" data-status="0">
                                    <i class="material-icons">schedule</i>
                                    <span>ÂæÖÂØ©Ê†∏</span>
                                </button>
                                <button type="button" onclick="filterByStatus(2)" class="dropdown-item" data-status="2">
                                    <i class="material-icons">reply</i>
                                    <span>ÈÄÄÂõû</span>
                                </button>
                                <button type="button" onclick="filterByStatus(1)" class="dropdown-item" data-status="1">
                                    <i class="material-icons">check_circle</i>
                                    <span>ÈÄöÈÅé</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- ÊâπÊ¨°Êìç‰Ωú‰∏ãÊãâÈÅ∏ÂñÆ -->
                        <div class="batch-operation-dropdown">
                            <button class="modern-btn batch-btn dropdown-toggle" type="button" onclick="toggleBatchDropdown()">
                                <i class="material-icons">done_all</i>
                                <span>ÊâπÊ¨°Êìç‰Ωú</span>
                            </button>
                            <div class="dropdown-menu" id="batchDropdown">
                                <button type="button" onclick="batchOperation('approve')" class="dropdown-item success">
                                    <i class="material-icons">check</i>
                                    <span>ÊâπÊ¨°ÈÄöÈÅé</span>
                                </button>
                                <button type="button" onclick="batchOperation('reject')" class="dropdown-item danger">
                                    <i class="material-icons">close</i>
                                    <span>ÊâπÊ¨°ÊãíÁµï</span>
                                </button>
                                <button type="button" onclick="batchOperation('pending')" class="dropdown-item warning">
                                    <i class="material-icons">schedule</i>
                                    <span>ÁßªËá≥ÂæÖÂØ©</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Âè≥ÂÅ¥ÊêúÂ∞ãÂçÄ -->
                    <div class="search-area">
                        <div class="search-input-wrapper">
                            <i class="material-icons search-icon">search</i>
                            <input id="searchInput" type="text" class="search-input" placeholder="ÊêúÂ∞ãÊôØÈªûÂêçÁ®±ÊàñÂú∞Èªû...">
                            <button type="button" class="clear-search">
                                <i class="material-icons">clear</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄ - Ê∑ªÂä†ÊãñÊãâÊ¢ùÂÆπÂô® -->
            <div class="main-content-area">
                <div class="spot-list-table-wrapper">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th style="width: 5%; text-align: center;"><input type="checkbox" id="selectAll"></th>
                                <th style="width: 5%;">ID</th>
                                <th style="width: 20%;">ÊôØÈªûÂêçÁ®±</th>
                                <th style="width: 20%;">Âú∞Èªû</th>
                                <th style="width: 25%;">ÊèèËø∞ / ÈÄÄÂõûÂéüÂõ†</th>
                                <th style="width: 10%;">Âª∫Á´ãÊôÇÈñì</th>
                                <th style="width: 5%; text-align: center;">ÁãÄÊÖã</th>
                                <th style="width: 10%; text-align: center;">Êìç‰Ωú</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:if="${#lists.isEmpty(pendingList)}">
                                <td colspan="8" class="center-align grey-text" style="padding: 40px 0; text-align: center;">
                                    <i class="material-icons" style="font-size: 48px; display: block; margin: 0 auto 10px auto;">inbox</i>
                                    <div style="margin-top: 10px;">ÁõÆÂâçÊ≤íÊúâÁ¨¶ÂêàÊ¢ù‰ª∂ÁöÑÊôØÈªû</div>
                                </td>
                            </tr>
                            <tr th:each="spot : ${pendingList}" th:attr="data-status=${spot.spotStatus}">
                                <td style="text-align: center;"><input type="checkbox" name="spotIds" th:value="${spot.spotId}" class="spot-checkbox"></td>
                                <td th:text="${spot.spotId}"></td>
                                <td th:text="${spot.spotName}"></td>
                                <td th:text="${spot.spotLoc}"></td>
                                <td>
                                    <span th:text="${spot.spotDesc}" class="spot-desc"></span>
                                    <small th:if="${spot.spotAuditRemark != null}" th:text="'ÈÄÄÂõûÂéüÂõ†: ' + ${spot.spotAuditRemark}" style="color: var(--danger-color); display: block;"></small>
                                </td>
                                <td th:if="${spot.spotCreateAt != null}" th:text="${#temporals.format(spot.spotCreateAt, 'yyyy-MM-dd')}"></td>
                                <td th:if="${spot.spotCreateAt == null}">ÁÑ°Êó•Êúü</td>
                                <td style="text-align: center;">
                                    <span th:switch="${spot.spotStatus}" class="status-badge" 
                                          th:classappend="${spot.spotStatus == 0 ? 'status-pending' : (spot.spotStatus == 1 ? 'status-active' : (spot.spotStatus == 2 ? 'status-rejected' : 'status-inactive'))}">
                                        <span th:case="0">ÂæÖÂØ©Ê†∏</span>
                                        <span th:case="1">‰∏äÊû∂</span>
                                        <span th:case="2">ÈÄÄÂõû</span>
                                        <span th:case="3">‰∏ãÊû∂</span>
                                        <span th:case="*">Êú™Áü•</span>
                                    </span>
                                </td>
                                <td class="action-buttons-table" style="text-align: center;">
                                    <button class="round-btn success" type="button" th:onclick="'approveSpot(' + ${spot.spotId} + ')'" title="ÈÄöÈÅé">
                                        <i class="material-icons">check</i>
                                    </button>
                                    <button class="round-btn danger" type="button" th:onclick="'showRejectModal(' + ${spot.spotId} + ')'" title="ÈÄÄÂõû">
                                        <i class="material-icons">close</i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ÈÄÄÂõûÂéüÂõ† Modal -->
        <div id="rejectModal" class="modal">
            <div class="modal-content">
                <h5>ÈÄÄÂõûÂéüÂõ†</h5>
                <form id="rejectForm">
                    <input type="hidden" id="rejectSpotId">
                    <div class="input-field">
                        <label for="rejectReason">Ë´ãÈÅ∏ÊìáÈÄÄÂõûÂéüÂõ†</label>
                        <select id="rejectReason">
                            <option value="Ë≥áÊñô‰∏çÂÆåÊï¥">Ë≥áÊñô‰∏çÂÆåÊï¥</option>
                            <option value="Âú∞ÈªûÈåØË™§">Âú∞ÈªûÈåØË™§</option>
                            <option value="ÊèèËø∞‰∏çÁ¨¶">ÊèèËø∞‰∏çÁ¨¶</option>
                            <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label for="rejectRemark">Ë£úÂÖÖË™™Êòé (ÂèØÈÅ∏Â°´)</label>
                        <input type="text" id="rejectRemark" placeholder="Ë£úÂÖÖË™™Êòé (ÂèØÈÅ∏Â°´)">
                    </div>
                </form>
                <div class="modal-footer">
                    <button class="btn-flat" onclick="submitReject()">Á¢∫Ë™çÈÄÄÂõû</button>
                    <button class="btn-flat" onclick="closeModal()">ÂèñÊ∂à</button>
                </div>
            </div>
        </div>
    </main>
</body>
</html> 